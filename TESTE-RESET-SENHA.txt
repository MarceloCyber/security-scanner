â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                      â•‘
â•‘     ğŸ”‘ GUIA: TESTAR FLUXO "ESQUECI MINHA SENHA" DO ADMIN ğŸ”‘         â•‘
â•‘                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


âœ… EMAIL DO ADMIN ATUALIZADO!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‘¤ UsuÃ¡rio: admin
ğŸ“§ Email: mac526@hotmail.com
ğŸ”‘ Senha atual: admin123


ğŸ“§ CONFIGURAR EMAIL SMTP (OBRIGATÃ“RIO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para testar o fluxo completo, vocÃª precisa configurar o SMTP no arquivo .env:

1. **Edite o arquivo .env** (na raiz do projeto):

```env
# Email Configuration
SMTP_HOST=smtp-mail.outlook.com
SMTP_PORT=587
SMTP_USER=mac526@hotmail.com
SMTP_PASSWORD=sua_senha_aqui
FROM_EMAIL=mac526@hotmail.com
FROM_NAME=Security Scanner Pro
```

âš ï¸ **IMPORTANTE - HOTMAIL/OUTLOOK**:
   - Use a senha do aplicativo, nÃ£o a senha normal
   - Gere uma senha de aplicativo em:
     https://account.live.com/proofs/manage/additional
   - Ou ative "SeguranÃ§a menos rigorosa" temporariamente


ğŸ§ª PASSO A PASSO PARA TESTAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPÃ‡ÃƒO 1: FLUXO COMPLETO COM EMAIL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. **Configure o SMTP** (veja acima)

2. **Reinicie o servidor** para carregar as novas configuraÃ§Ãµes:
   ```bash
   cd /Users/marcelorodrigues/Desktop/Hacking-Tools/security-scanner/backend
   pkill -f uvicorn
   python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
   ```

3. **Acesse a pÃ¡gina de login admin**:
   http://localhost:8000/admin-login.html

4. **Clique em "Esqueceu a senha?"**

5. **Digite seu email**: mac526@hotmail.com

6. **Clique em "Enviar Link de Reset"**

7. **Verifique sua caixa de entrada** (mac526@hotmail.com)
   - Assunto: "Reset de Senha - Security Scanner Pro Admin"
   - Pode demorar alguns segundos

8. **Abra o email e clique no link** ou copie a URL

9. **Digite sua nova senha** (2 vezes)
10. **Clique em "Alterar Senha"**

11. **FaÃ§a login com a nova senha**


OPÃ‡ÃƒO 2: TESTE RÃPIDO SEM EMAIL (MANUAL)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Se nÃ£o quiser configurar SMTP agora:

1. **Solicite o reset via terminal**:
   ```bash
   curl -X POST http://localhost:8000/api/auth/forgot-password \
     -H "Content-Type: application/json" \
     -d '{"email":"mac526@hotmail.com"}'
   ```

2. **Pegue o token do banco de dados**:
   ```bash
   cd /Users/marcelorodrigues/Desktop/Hacking-Tools/security-scanner/backend
   sqlite3 security_scanner.db "SELECT reset_token FROM users WHERE email='mac526@hotmail.com';"
   ```

3. **Copie o token retornado**

4. **Acesse a pÃ¡gina de reset com o token**:
   ```
   http://localhost:8000/admin-reset-password.html?token=SEU_TOKEN_AQUI
   ```

5. **Digite nova senha** (2 vezes)

6. **Clique em "Alterar Senha"**

7. **FaÃ§a login com a nova senha**


OPÃ‡ÃƒO 3: USAR SCRIPT DE RESET (MAIS FÃCIL)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. **Execute o script**:
   ```bash
   cd /Users/marcelorodrigues/Desktop/Hacking-Tools/security-scanner/backend
   python3 reset_admin_password.py
   ```

2. **Siga as instruÃ§Ãµes na tela**:
   - Selecione o usuÃ¡rio admin (ID 1)
   - Digite a nova senha
   - Confirme a senha

3. **FaÃ§a login com a nova senha**


ğŸ” VERIFICAR SE O EMAIL FOI ENVIADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**No Console do Servidor** (onde uvicorn estÃ¡ rodando):

âœ… SUCESSO - VocÃª verÃ¡ algo como:
```
INFO:     127.0.0.1:54321 - "POST /api/auth/forgot-password HTTP/1.1" 200 OK
```

âŒ ERRO - VocÃª verÃ¡ algo como:
```
ERROR: Error sending email: [Errno 61] Connection refused
```

Se der erro:
1. Verifique as configuraÃ§Ãµes SMTP no .env
2. Verifique se a senha estÃ¡ correta
3. Tente usar senha de aplicativo
4. Use OPÃ‡ÃƒO 2 ou 3 como alternativa


ğŸ“§ EXEMPLO DE EMAIL QUE VOCÃŠ RECEBERÃ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Assunto: Reset de Senha - Security Scanner Pro Admin

ConteÃºdo:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”’ Reset de Senha                                              â”‚
â”‚                                                                 â”‚
â”‚ OlÃ¡, admin!                                                     â”‚
â”‚                                                                 â”‚
â”‚ VocÃª solicitou o reset de senha para sua conta de             â”‚
â”‚ administrador no Security Scanner Pro.                          â”‚
â”‚                                                                 â”‚
â”‚ Clique no botÃ£o abaixo para criar uma nova senha:              â”‚
â”‚                                                                 â”‚
â”‚         [ Resetar Senha ]                                       â”‚
â”‚                                                                 â”‚
â”‚ âš ï¸ IMPORTANTE:                                                  â”‚
â”‚ â€¢ Este link Ã© vÃ¡lido por apenas 1 hora                         â”‚
â”‚ â€¢ Se vocÃª nÃ£o solicitou este reset, ignore este email          â”‚
â”‚ â€¢ Nunca compartilhe este link com ninguÃ©m                      â”‚
â”‚                                                                 â”‚
â”‚ Link alternativo:                                               â”‚
â”‚ http://localhost:8000/admin-reset-password.html?token=abc123   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ¯ CHECKLIST DE TESTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Antes de testar:
[ ] Servidor rodando (http://localhost:8000)
[ ] Email atualizado no banco (mac526@hotmail.com)
[ ] SMTP configurado no .env (se testar com email)

Durante o teste:
[ ] Modal "Esqueci senha" abre corretamente
[ ] Email Ã© aceito no formulÃ¡rio
[ ] Mensagem de sucesso aparece
[ ] Email chega na caixa de entrada (se SMTP configurado)
[ ] Link do email funciona
[ ] PÃ¡gina de reset carrega
[ ] Nova senha Ã© aceita (mÃ­nimo 8 caracteres)
[ ] ConfirmaÃ§Ã£o de senha valida corretamente
[ ] Mensagem de sucesso ao alterar senha
[ ] Redirecionamento para login funciona
[ ] Login com nova senha funciona
[ ] Painel admin carrega corretamente

ApÃ³s o teste:
[ ] Token foi removido do banco
[ ] NÃ£o Ã© possÃ­vel reusar o mesmo token
[ ] Token expira apÃ³s 1 hora


ğŸ”§ CONFIGURAÃ‡ÃƒO SMTP PARA DIFERENTES PROVEDORES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**HOTMAIL/OUTLOOK** (seu caso):
```env
SMTP_HOST=smtp-mail.outlook.com
SMTP_PORT=587
SMTP_USER=mac526@hotmail.com
SMTP_PASSWORD=senha_de_aplicativo_aqui
```

**GMAIL**:
```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=seu-email@gmail.com
SMTP_PASSWORD=senha_de_aplicativo_aqui
```
Gere senha de app: https://myaccount.google.com/apppasswords

**YAHOO**:
```env
SMTP_HOST=smtp.mail.yahoo.com
SMTP_PORT=587
SMTP_USER=seu-email@yahoo.com
SMTP_PASSWORD=senha_de_aplicativo_aqui
```

**OUTROS**:
```env
SMTP_HOST=smtp.provedor.com
SMTP_PORT=587  # ou 465 para SSL
SMTP_USER=seu-email@provedor.com
SMTP_PASSWORD=sua_senha
```


âš ï¸ TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**Problema**: Email nÃ£o chega
**SoluÃ§Ã£o**: 
- Verifique spam/lixo eletrÃ´nico
- Confirme SMTP configurado corretamente
- Verifique logs do servidor
- Use OPÃ‡ÃƒO 2 ou 3 como alternativa

**Problema**: "Token invÃ¡lido ou expirado"
**SoluÃ§Ã£o**:
- Token dura 1 hora, solicite novo reset
- Verifique se copiou o token completo
- NÃ£o use o mesmo token 2 vezes

**Problema**: "Senha deve ter no mÃ­nimo 8 caracteres"
**SoluÃ§Ã£o**:
- Use senha com pelo menos 8 caracteres
- Confirme que as duas senhas sÃ£o iguais

**Problema**: NÃ£o recebo email do Hotmail
**SoluÃ§Ã£o**:
1. Gere senha de aplicativo:
   - Acesse: https://account.live.com/proofs/manage/additional
   - Clique "Criar uma nova senha de aplicativo"
   - Copie a senha gerada
   - Use no .env
2. Ou use OPÃ‡ÃƒO 2 (manual) ou OPÃ‡ÃƒO 3 (script)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

            âœ¨ TUDO PRONTO PARA TESTAR! âœ¨

     Email atualizado: mac526@hotmail.com
       Escolha uma das 3 opÃ§Ãµes acima!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ“ CREDENCIAIS ATUAIS:
   URL: http://localhost:8000/admin-login.html
   Username: admin
   Email: mac526@hotmail.com
   Senha: admin123 (antes de resetar)

Data: 5 de dezembro de 2025
Status: âœ… EMAIL ATUALIZADO E PRONTO PARA TESTE
